{% extends "base.html" %}

{%  block content %}
<div class="main-content">

    <div class="container">
        <div class="row">
            <div class="col s12 m10 l10 offset-l1 offset-m1">
                {% if post%}
                <div class="card hoverable">
                    <!-- title -->
                    <div class="card-content">
                        <h5>{{post.title}}</h5>
                        <div class="grey-text">
                            <ul>
                                <li style="float:left"><i class="fa fa-user fa-fw"></i> {{post.users.nickname}}</li>
                                <li style="float:left;margin-left:40px"> <i class="fa fa-calendar fa-fw"></i>{{post.update_at}}</li>
                            </ul>
                        </div>
                    </div>
                    <div class="divider" style="clear:both"></div>
                    <!-- content -->
                    <div class="card-content">
                        <p>{{post.content}}</p>
                    </div>

		            <div class="card-action">
                        <a href="post/{{post.id}}">查看更多</a>
                    </div>
                </div><!--end card-->
                {% endif %}
		
                {% for comment in comments if comments %}
                <div class="card hoverable" style="border:1px #ccc solid" >
                    <div class="card-content">
                        {{ comment.name }}:{{comment.comment}}
                    </div>
                </div>
                {% endfor %}

                <!-- 评论表单 -->
                {% if form %}
                <div class="card hoverable" style="border:1px #ccc solid" >
                    <div class="card-content">
                        <h6>留下您的宝贵意见吧！</h6>
                    </div>
                    <div class="divider"></div>
                    <div class="card-content">
                        <form method="POST" action="{{url_for('blog.post', post_id=post.id)}}">
                            {{ form.hidden_tag() }}
                            <div>
                                {{ form.name.label }}
                                {% if form.name.errors %}
                                    {% for e in form.name.errors %}
                                        <p class="help-block"> {{e}} </p>
                                    {% endfor %}
                                {% endif %}
                                {{ form.name(class="form-control") }}
                            </div>
                            <div>
                                {{ form.email.label }}
                                {% if form.email.errors %}
                                    {% for e in form.email.errors %}
                                        <p class="help-block"> {{e}} </p>
                                    {% endfor %}
                                {% endif %}
                                {{ form.email(class="form-control") }}
                            </div>
                            <div class="form-group">
                                {{ form.comment.label }}
                                {% if form.comment.errors %}
                                    {% for e in comment.text.errors %}
                                        <p class="help-block"> {{e}} </p>
                                    {% endfor %}
                                {% endif %}
                                {{ form.comment(class="form-control") }}
                            </div>

                            <input class="btn btn-primary" type="submit" value="提交评论">
                        </form>
                    </div>
                </div>
                {% endif %}

            </div><!--end col-->
        </div> <!--end row-->
    </div><!--end container-->
</div> <!-- end main-content -->
{% endblock %}

{% block footer %}
{% include 'includes/_footer.html'%}
{% endblock %}
